<div class="container-fluid">
    <div class="row">
      <main role="main" class="col-md-9 ml-sm-auto col-lg-10 pt-3 px-4">
          <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h1 class="h2">Partes</h1>
            
        </div>
         <form class="form-inline">
            <div ngbDropdown class="d-inline-block">
              <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle>{{selectedCompany}}</button>
              <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
              <button class="dropdown-item" *ngFor="let c of mycompanies" (click)="ChangeCompany(c.name)" >{{c.name}} </button>
            </div>
          </div>


          <label>&nbsp;&nbsp;</label>
            <div ngbDropdown class="d-inline-block">
                <button class="btn btn-outline-primary" id="dropdownBasic1" ngbDropdownToggle>{{selectedUser}}</button>
                <div ngbDropdownMenu aria-labelledby="dropdownBasic1">
                <button class="dropdown-item" *ngFor="let u of myusers" (click)="ChangeUser(u.realname)" >{{u.realname}} </button>
              </div>
            </div>
 
            <label for="name"class="inline">&nbsp; Fecha &nbsp;</label>

            <div class="form-group">
              <div class="input-group">
                <input class="form-control" placeholder="yyyy-mm-dd"  name="date" [(ngModel)]="date" ngbDatepicker #d="ngbDatepicker">
        
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" (click)="d.toggle()" type="button"><i class="fa fa-calendar"></i> </button>
                </div>
                <input class="form-control" placeholder="yyyy-mm-dd" name="date2"  [(ngModel)]="date2" ngbDatepicker #d2="ngbDatepicker">
                  <button class="btn btn-outline-secondary" (click)="d2.toggle()" type="button"> <i class="fa fa-calendar"></i> </button>
              
              </div>
            </div>
          

           <label>&nbsp;&nbsp;</label>
            <button class="btn btn-primary" type="submit" (click)="filtrar(date,date2)" >Filtrar</button>
          
            <label>&nbsp;&nbsp;</label>
            <button class="btn btn-primary" type="submit" (click)="clear()" >Limpiar filtro</button>
          </form>
          <br />



<table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="row-border hover" id = "table">
    <thead>
      <tr>
        <th>Operador</th>
        <th>Empresa</th>
        <th>Fecha</th>
        <th>Hora de inicio</th>
        <th><i class="fa fa-clock-o"></i></th>
        <th><i class="fa fa-road"></i></th>
        <th><i class="fa fa-car"></i></th>
        <th>Desplazamiento</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let parte of mypartes" (click)="moreInfo(parte)">
        <td><app-info-user [uid]="parte.createdby"></app-info-user> {{ parte.operator }}
        </td>
        <td><app-info-company [name]="parte.company"></app-info-company> {{ parte.company }}</td>
        <td >{{ parte.date.day }}  /  {{parte.date.month}}/ {{parte.date.year }}</td>
        <td>{{ parte.dBegining.hour}}:{{parte.dBegining.minute}}:{{parte.dBegining.second}}</td>
        <td>{{ ((parte.dEnd.hour*60)+(parte.dEnd.minute)) - (parte.dBegining.hour*60 + parte.dBegining.minute) }} minutos </td>
        <td>{{ parte.km }} km</td>
        <td >
           
          <i *ngIf="parte.cocheParticular" class="fa fa-check-square"></i>
          <i *ngIf="!parte.cocheParticular" class="fa fa-times"></i>
        </td>
        <td >
           <a aria-label="si">
          <i *ngIf="parte.displacements" class="fa fa-check-square" aria-hidden="true" >  </i></a>
          <a>
          <i *ngIf="!parte.displacements" class="fa fa-times"  aria-hidden="true"></i> </a>
        </td>
        <td>
          <app-confirm-parte-delete [parte]="parte"></app-confirm-parte-delete>
          <app-modify-parte [parte]="parte"></app-modify-parte>
        </td>
       
      </tr>
    </tbody>
  </table>
        </main>
      </div>
</div>